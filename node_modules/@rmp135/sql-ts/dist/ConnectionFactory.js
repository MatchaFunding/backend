import knex from 'knex';
/**
 * Runs a function with a temporary database context.
 *
 * @export
 * @template T
 * @param {Config} config The config to create the database.
 * @param {(d: Knex) => T} func The function to run.
 * @returns {T}
 */
export async function createAndRun(config, func) {
    let db;
    try {
        db = knex(config);
        return await func(db);
    }
    finally {
        await db?.destroy();
    }
}
//# sourceMappingURL=ConnectionFactory.js.map